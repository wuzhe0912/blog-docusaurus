---
id: let-var-const-differences
title: '[Medium] ğŸ“„ var, let, const'
slug: /let-var-const-differences
tags: [JavaScript, Quiz, Medium]
---

## æ¦‚è¦

JavaScript ã«ã¯å¤‰æ•°ã‚’å®£è¨€ã™ã‚‹ãŸã‚ã®3ã¤ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒã‚ã‚Šã¾ã™ï¼š`var`ã€`let`ã€`const`ã€‚ã„ãšã‚Œã‚‚å¤‰æ•°ã®å®£è¨€ã«ä½¿ç”¨ã•ã‚Œã¾ã™ãŒã€ã‚¹ã‚³ãƒ¼ãƒ—ã€åˆæœŸåŒ–ã€é‡è¤‡å®£è¨€ã€å†ä»£å…¥ã€ã‚¢ã‚¯ã‚»ã‚¹ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãªã©ã®é¢ã§é•ã„ãŒã‚ã‚Šã¾ã™ã€‚

## ä¸»ãªé•ã„

| å‹•ä½œ           | `var`                        | `let`               | `const`             |
| -------------- | ---------------------------- | ------------------- | ------------------- |
| ã‚¹ã‚³ãƒ¼ãƒ—       | é–¢æ•°ã‚¹ã‚³ãƒ¼ãƒ—ã¾ãŸã¯ã‚°ãƒ­ãƒ¼ãƒãƒ« | ãƒ–ãƒ­ãƒƒã‚¯ã‚¹ã‚³ãƒ¼ãƒ—    | ãƒ–ãƒ­ãƒƒã‚¯ã‚¹ã‚³ãƒ¼ãƒ—    |
| åˆæœŸåŒ–         | ä»»æ„                         | ä»»æ„                | å¿…é ˆ                |
| é‡è¤‡å®£è¨€       | è¨±å¯                         | ä¸è¨±å¯              | ä¸è¨±å¯              |
| å†ä»£å…¥         | è¨±å¯                         | è¨±å¯                | ä¸è¨±å¯              |
| å®£è¨€å‰ã‚¢ã‚¯ã‚»ã‚¹ | undefined ã‚’è¿”ã™             | ReferenceError ç™ºç”Ÿ | ReferenceError ç™ºç”Ÿ |

## è©³ç´°èª¬æ˜

### ã‚¹ã‚³ãƒ¼ãƒ—

`var` ã®ã‚¹ã‚³ãƒ¼ãƒ—ã¯é–¢æ•°ã‚¹ã‚³ãƒ¼ãƒ—ã¾ãŸã¯ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ã§ã™ãŒã€`let` ã¨ `const` ã¯ãƒ–ãƒ­ãƒƒã‚¯ã‚¹ã‚³ãƒ¼ãƒ—ï¼ˆé–¢æ•°ã€if-else ãƒ–ãƒ­ãƒƒã‚¯ã€for ãƒ«ãƒ¼ãƒ—ã‚’å«ã‚€ï¼‰ã§ã™ã€‚

```javascript
function scopeExample() {
  var varVariable = 'var';
  let letVariable = 'let';
  const constVariable = 'const';

  console.log(varVariable); // 'var'
  console.log(letVariable); // 'let'
  console.log(constVariable); // 'const'
}

scopeExample();

console.log(varVariable); // ReferenceError: varVariable is not defined
console.log(letVariable); // ReferenceError: letVariable is not defined
console.log(constVariable); // ReferenceError: constVariable is not defined

if (true) {
  var varInBlock = 'var in block';
  let letInBlock = 'let in block';
  const constInBlock = 'const in block';
}

console.log(varInBlock); // 'var in block'
console.log(letInBlock); // ReferenceError: letInBlock is not defined
console.log(constInBlock); // ReferenceError: constInBlock is not defined
```

### åˆæœŸåŒ–

`var` ã¨ `let` ã¯å®£è¨€æ™‚ã«åˆæœŸåŒ–ã—ãªãã¦ã‚‚æ§‹ã„ã¾ã›ã‚“ãŒã€`const` ã¯å®£è¨€æ™‚ã«å¿…ãšåˆæœŸåŒ–ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```javascript
var varVariable;  // æœ‰åŠ¹
let letVariable;  // æœ‰åŠ¹
const constVariable;  // SyntaxError: Missing initializer in const declaration
```

### é‡è¤‡å®£è¨€

åŒã˜ã‚¹ã‚³ãƒ¼ãƒ—å†…ã§ã€`var` ã¯åŒã˜å¤‰æ•°ã®é‡è¤‡å®£è¨€ã‚’è¨±å¯ã—ã¾ã™ãŒã€`let` ã¨ `const` ã¯è¨±å¯ã—ã¾ã›ã‚“ã€‚

```javascript
var x = 1;
var x = 2; // æœ‰åŠ¹ã€x ã¯ 2 ã«ãªã‚‹

let y = 1;
let y = 2; // SyntaxError: Identifier 'y' has already been declared

const z = 1;
const z = 2; // SyntaxError: Identifier 'z' has already been declared
```

### å†ä»£å…¥

`var` ã¨ `let` ã§å®£è¨€ã•ã‚ŒãŸå¤‰æ•°ã¯å†ä»£å…¥ã§ãã¾ã™ãŒã€`const` ã§å®£è¨€ã•ã‚ŒãŸå¤‰æ•°ã¯å†ä»£å…¥ã§ãã¾ã›ã‚“ã€‚

```javascript
var x = 1;
x = 2; // æœ‰åŠ¹

let y = 1;
y = 2; // æœ‰åŠ¹

const z = 1;
z = 2; // TypeError: Assignment to a constant variable
```

æ³¨æ„ï¼š`const` ã§å®£è¨€ã•ã‚ŒãŸå¤‰æ•°ã¯å†ä»£å…¥ã§ãã¾ã›ã‚“ãŒã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚„é…åˆ—ã®å ´åˆã€ãã®å†…å®¹ã¯å¤‰æ›´å¯èƒ½ã§ã™ã€‚

```javascript
const obj = { key: 'value' };
obj.key = 'new value'; // æœ‰åŠ¹
console.log(obj); // { key: 'new value' }

const arr = [1, 2, 3];
arr.push(4); // æœ‰åŠ¹
console.log(arr); // [1, 2, 3, 4]
```

### å®£è¨€å‰ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆTemporal Dead Zoneï¼‰

`var` ã§å®£è¨€ã•ã‚ŒãŸå¤‰æ•°ã¯ Hoisting ã•ã‚Œè‡ªå‹•çš„ã« `undefined` ã«åˆæœŸåŒ–ã•ã‚Œã¾ã™ã€‚ä¸€æ–¹ã€`let` ã¨ `const` ã§å®£è¨€ã•ã‚ŒãŸå¤‰æ•°ã‚‚ Hoisting ã•ã‚Œã¾ã™ãŒã€åˆæœŸåŒ–ã¯ã•ã‚Œãªã„ãŸã‚ã€å®£è¨€å‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ `ReferenceError` ãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã¾ã™ã€‚

```javascript
console.log(x); // undefined
var x = 5;

console.log(y); // ReferenceError: Cannot access 'y' before initialization
let y = 5;

console.log(z); // ReferenceError: Cannot access 'z' before initialization
const z = 5;
```

## é¢æ¥å•é¡Œ

### å•é¡Œï¼šsetTimeout + var ã®å…¸å‹çš„ãªç½ 

ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã®å‡ºåŠ›çµæœã‚’åˆ¤å®šã—ã¦ãã ã•ã„ï¼š

```javascript
for (var i = 1; i <= 5; i++) {
  setTimeout(function () {
    console.log(i);
  }, 0);
}
```

#### èª¤ç­”ï¼ˆã‚ˆãã‚ã‚‹èª¤è§£ï¼‰

å¤šãã®äººãŒå‡ºåŠ›ã¯ `1 2 3 4 5` ã ã¨æ€ã„ã¾ã™ã€‚

#### å®Ÿéš›ã®å‡ºåŠ›

```
6
6
6
6
6
```

#### ãªãœï¼Ÿ

ã“ã®å•é¡Œã¯3ã¤ã®ã‚³ã‚¢ã‚³ãƒ³ã‚»ãƒ—ãƒˆã«é–¢ã‚ã‚Šã¾ã™ï¼š

**1. var ã®é–¢æ•°ã‚¹ã‚³ãƒ¼ãƒ—**

```javascript
// var ã¯ãƒ«ãƒ¼ãƒ—å†…ã§ãƒ–ãƒ­ãƒƒã‚¯ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ä½œæˆã—ãªã„
for (var i = 1; i <= 5; i++) {
  // i ã¯å¤–å´ã®ã‚¹ã‚³ãƒ¼ãƒ—ã«ã‚ã‚Šã€å…¨ã¦ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒåŒã˜ i ã‚’å…±æœ‰ã™ã‚‹
}
console.log(i); // 6ï¼ˆãƒ«ãƒ¼ãƒ—çµ‚äº†å¾Œã® i ã®å€¤ï¼‰

// var ã®å ´åˆ
{
  var i;
  i = 1;
  i = 2;
  i = 3;
  i = 4; // ãƒ«ãƒ¼ãƒ—çµ‚äº†
}
```

**2. setTimeout ã®éåŒæœŸå®Ÿè¡Œ**

```javascript
// setTimeout ã¯éåŒæœŸã§ã€ç¾åœ¨ã®åŒæœŸã‚³ãƒ¼ãƒ‰ã®å®Ÿè¡Œå®Œäº†å¾Œã«å®Ÿè¡Œã•ã‚Œã‚‹
for (var i = 1; i <= 5; i++) {
  setTimeout(function () {
    // ã“ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ Event Loop ã®ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼ã«å…¥ã‚Œã‚‰ã‚Œã‚‹
    console.log(i);
  }, 0);
}
// ãƒ«ãƒ¼ãƒ—ãŒå…ˆã«å®Œäº†ã—ï¼ˆi ãŒ 6 ã«ãªã‚‹ï¼‰ã€ãã®å¾Œ setTimeout ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ãŒå®Ÿè¡Œã•ã‚Œã‚‹
```

**3. Closure ã®å‚ç…§**

```javascript
// å…¨ã¦ã® setTimeout ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ãŒåŒã˜ i ã‚’å‚ç…§ã—ã¦ã„ã‚‹
// ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ãŒå®Ÿè¡Œã•ã‚Œã‚‹æ™‚ã€i ã¯æ—¢ã« 6 ã«ãªã£ã¦ã„ã‚‹
```

#### è§£æ±ºç­–

**æ–¹æ³• 1ï¼šlet ã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰â˜…**

```javascript
for (let i = 1; i <= 5; i++) {
  setTimeout(function () {
    console.log(i);
  }, 0);
}
// å‡ºåŠ›ï¼š1 2 3 4 5

// let ã®å ´åˆ
{
  let i = 1; // ç¬¬1ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã® i
}
{
  let i = 2; // ç¬¬2ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã® i
}
{
  let i = 3; // ç¬¬3ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã® i
}
```

**åŸç†**ï¼š`let` ã¯å„ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§æ–°ã—ã„ãƒ–ãƒ­ãƒƒã‚¯ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ä½œæˆã—ã€å„ `setTimeout` ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ãŒç¾åœ¨ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã® `i` ã®å€¤ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ã¾ã™ã€‚

```javascript
// ç­‰ä¾¡
{
  let i = 1;
  setTimeout(function () {
    console.log(i);
  }, 0);
}
{
  let i = 2;
  setTimeout(function () {
    console.log(i);
  }, 0);
}
// ... ä»¥ä¸‹åŒæ§˜
```

**æ–¹æ³• 2ï¼šIIFEï¼ˆå³æ™‚å®Ÿè¡Œé–¢æ•°ï¼‰ã‚’ä½¿ç”¨**

```javascript
for (var i = 1; i <= 5; i++) {
  (function (j) {
    setTimeout(function () {
      console.log(j);
    }, 0);
  })(i);
}
// å‡ºåŠ›ï¼š1 2 3 4 5
```

**åŸç†**ï¼šIIFE ãŒæ–°ã—ã„é–¢æ•°ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ä½œæˆã—ã€å„ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ç¾åœ¨ã® `i` ã®å€¤ãŒãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ `j` ã¨ã—ã¦æ¸¡ã•ã‚Œã€Closure ã‚’å½¢æˆã—ã¾ã™ã€‚

**æ–¹æ³• 3ï¼šsetTimeout ã®ç¬¬3å¼•æ•°ã‚’ä½¿ç”¨**

```javascript
for (var i = 1; i <= 5; i++) {
  setTimeout(
    function (j) {
      console.log(j);
    },
    0,
    i
  ); // ç¬¬3å¼•æ•°ãŒã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã«æ¸¡ã•ã‚Œã‚‹
}
// å‡ºåŠ›ï¼š1 2 3 4 5
```

**åŸç†**ï¼š`setTimeout` ã®ç¬¬3å¼•æ•°ä»¥é™ã¯ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã®å¼•æ•°ã¨ã—ã¦æ¸¡ã•ã‚Œã¾ã™ã€‚

**æ–¹æ³• 4ï¼šbind ã‚’ä½¿ç”¨**

```javascript
for (var i = 1; i <= 5; i++) {
  setTimeout(
    function (j) {
      console.log(j);
    }.bind(null, i),
    0
  );
}
// å‡ºåŠ›ï¼š1 2 3 4 5
```

**åŸç†**ï¼š`bind` ã¯æ–°ã—ã„é–¢æ•°ã‚’ä½œæˆã—ã€ç¾åœ¨ã® `i` ã®å€¤ã‚’å¼•æ•°ã¨ã—ã¦ãƒã‚¤ãƒ³ãƒ‰ã—ã¾ã™ã€‚

#### æ–¹æ³•ã®æ¯”è¼ƒ

| æ–¹æ³•            | ãƒ¡ãƒªãƒƒãƒˆ         | ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ   | æ¨å¥¨åº¦           |
| --------------- | ---------------- | ------------ | ---------------- |
| `let`           | ç°¡æ½”ã€ãƒ¢ãƒ€ãƒ³ã€åˆ†ã‹ã‚Šã‚„ã™ã„ | ES6+       | 5/5 å¼·ãæ¨å¥¨     |
| IIFE            | äº’æ›æ€§ãŒè‰¯ã„     | æ§‹æ–‡ãŒè¤‡é›‘   | 3/5 æ¤œè¨å¯       |
| setTimeout å¼•æ•° | ã‚·ãƒ³ãƒ—ãƒ«ã§ç›´æ¥çš„ | ã‚ã¾ã‚ŠçŸ¥ã‚‰ã‚Œã¦ã„ãªã„ | 4/5 æ¨å¥¨   |
| `bind`          | é–¢æ•°å‹ã‚¹ã‚¿ã‚¤ãƒ«   | å¯èª­æ€§ãŒã‚„ã‚„åŠ£ã‚‹ | 3/5 æ¤œè¨å¯   |

#### ç™ºå±•å•é¡Œ

**Q1: æ¬¡ã®ã‚ˆã†ã«å¤‰æ›´ã—ãŸã‚‰ï¼Ÿ**

```javascript
for (var i = 1; i <= 5; i++) {
  setTimeout(function () {
    console.log(i);
  }, i * 1000);
}
```

**ç­”ãˆ**ï¼šæ¯ç§’ `6` ãŒå‡ºåŠ›ã•ã‚Œã€åˆè¨ˆ5å›å‡ºåŠ›ã•ã‚Œã¾ã™ï¼ˆãã‚Œãã‚Œ1ç§’ã€2ç§’ã€3ç§’ã€4ç§’ã€5ç§’æ™‚ã«å‡ºåŠ›ï¼‰ã€‚

**Q2: æ¯ç§’é †ç•ªã« 1ã€2ã€3ã€4ã€5 ã‚’å‡ºåŠ›ã—ãŸã„å ´åˆã¯ï¼Ÿ**

```javascript
for (let i = 1; i <= 5; i++) {
  setTimeout(function () {
    console.log(i);
  }, i * 1000);
}
// 1ç§’å¾Œã« 1 ã‚’å‡ºåŠ›
// 2ç§’å¾Œã« 2 ã‚’å‡ºåŠ›
// 3ç§’å¾Œã« 3 ã‚’å‡ºåŠ›
// 4ç§’å¾Œã« 4 ã‚’å‡ºåŠ›
// 5ç§’å¾Œã« 5 ã‚’å‡ºåŠ›
```

#### é¢æ¥ã®ãƒã‚¤ãƒ³ãƒˆ

ã“ã®å•é¡ŒãŒãƒ†ã‚¹ãƒˆã™ã‚‹ã®ã¯ï¼š

1. **var ã®ã‚¹ã‚³ãƒ¼ãƒ—**ï¼šé–¢æ•°ã‚¹ã‚³ãƒ¼ãƒ— vs ãƒ–ãƒ­ãƒƒã‚¯ã‚¹ã‚³ãƒ¼ãƒ—
2. **Event Loop**ï¼šåŒæœŸ vs éåŒæœŸå®Ÿè¡Œ
3. **Closure**ï¼šé–¢æ•°ãŒå¤–éƒ¨å¤‰æ•°ã‚’ã©ã®ã‚ˆã†ã«ã‚­ãƒ£ãƒ—ãƒãƒ£ã™ã‚‹ã‹
4. **è§£æ±ºç­–**ï¼šè¤‡æ•°ã®è§£æ³•ã¨ãã®é•·æ‰€ãƒ»çŸ­æ‰€ã®æ¯”è¼ƒ

å›ç­”ã™ã‚‹éš›ã¯ä»¥ä¸‹ã‚’æ¨å¥¨ã—ã¾ã™ï¼š

- ã¾ãšæ­£è§£ã‚’è¿°ã¹ã‚‹ï¼ˆ6 6 6 6 6ï¼‰
- ç†ç”±ã‚’èª¬æ˜ã™ã‚‹ï¼ˆvar ã®ã‚¹ã‚³ãƒ¼ãƒ— + setTimeout ã®éåŒæœŸï¼‰
- è§£æ±ºç­–ã‚’æä¾›ã™ã‚‹ï¼ˆlet ã‚’å„ªå…ˆã—ã€ä»–ã®æ–¹æ³•ã‚‚èª¬æ˜ã™ã‚‹ï¼‰
- JavaScript ã®å†…éƒ¨ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã¸ã®ç†è§£ã‚’ç¤ºã™

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

1. å„ªå…ˆçš„ã« `const` ã‚’ä½¿ç”¨ï¼šå†ä»£å…¥ãŒä¸è¦ãªå¤‰æ•°ã«ã¯ `const` ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§ã¨ä¿å®ˆæ€§ãŒå‘ä¸Šã—ã¾ã™ã€‚
2. æ¬¡ã« `let` ã‚’ä½¿ç”¨ï¼šå†ä»£å…¥ãŒå¿…è¦ãªå ´åˆã¯ `let` ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
3. `var` ã®ä½¿ç”¨ã‚’é¿ã‘ã‚‹ï¼š`var` ã®ã‚¹ã‚³ãƒ¼ãƒ—ã¨ Hoisting ã®å‹•ä½œã¯äºˆæœŸã—ãªã„å•é¡Œã‚’å¼•ãèµ·ã“ã™å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€ãƒ¢ãƒ€ãƒ³ãª JavaScript é–‹ç™ºã§ã¯ä½¿ç”¨ã‚’é¿ã‘ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚
4. ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§ã«æ³¨æ„ï¼šæ—§ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚µãƒãƒ¼ãƒˆãŒå¿…è¦ãªå ´åˆã¯ã€Babel ãªã©ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã—ã¦ `let` ã¨ `const` ã‚’ `var` ã«ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«ã§ãã¾ã™ã€‚

## é–¢é€£ãƒˆãƒ”ãƒƒã‚¯

- [Closure](/docs/closure)
- [Event Loop](/docs/event-loop)
- [Hoisting](/docs/hoisting)
