---
id: react-api
title: ðŸ“„ React Basic & API
slug: /react-api
---

## 1. Can you describe `useEffect` ?

> è«‹æè¿° `useEffect`

`useEffect` å¯ä»¥ç†è§£ç‚ºåœ¨ function component çš„è¨­è¨ˆä¸‹ï¼Œå°å…ƒä»¶ç”Ÿå‘½é€±æœŸçš„æŽ§åˆ¶ï¼Œé‡å°ä¸åŒéšŽæ®µåŽ»æ±ºå®šæ˜¯å¦è¦åŸ·è¡ŒæŸäº›æ•ˆæžœæˆ–æ”¹è®Šç‹€æ…‹ã€‚

åœ¨ class component çš„æ™‚ä»£ï¼Œç”Ÿå‘½é€±æœŸå¯ä»¥åŠƒåˆ†ç‚ºä¸‰å€‹éšŽæ®µï¼š

`componentDidMount` => å…ƒä»¶æ¸²æŸ“å®Œæˆå¾Œ
`componentDidUpdate` => ç•¶å…ƒä»¶çš„ state çš„å€¼æœ‰æ”¹è®Šï¼Œé€²è¡Œæ›´æ–°
`componentWillUnmount` => ç•¶å…ƒä»¶è¢«ç§»é™¤æ™‚

å› æ­¤æˆ‘å€‘å¯ä»¥é€éŽç›¸åŒæ¦‚å¿µä¾†ç†è§£ `useEffect`ï¼Œç•¶æˆ‘æƒ³è¦æ¯æ¬¡ render æ™‚å°±è§¸ç™¼ä¸€æ¬¡ï¼Œé‚£å°±ä¸éœ€è¦å¡«å…¥åƒæ•¸ï¼Œé€™åŒ…æ‹¬ç•¶ state æ”¹è®Šæ™‚è‹¥é€ æˆç•«é¢ä¹Ÿé‡æ–°æ¸²æŸ“æ™‚ä¹Ÿæœƒè§¸ç™¼ï¼š

```js
useEffect(() => {
  console.log(1);
});
```

å¦‚æžœæˆ‘åªæƒ³è¦é€²å…¥é é¢æ™‚ï¼Œåªè§¸ç™¼ä¸€æ¬¡ï¼Œå‰‡å¡«å…¥åƒæ•¸ `[]`ï¼š

```js
useEffect(() => {
  console.log(1);
}, []);
```

åä¹‹ï¼Œå¦‚æžœæˆ‘æœ‰ä¸€å€‹åˆ—è¡¨å·²ç¶“ç”¨ `useState` ä¿å­˜èµ·ä¾†ï¼Œä½†æˆ‘å¸Œæœ›è‹¥åˆ—è¡¨å‡ºç¾è®ŠåŒ–æ™‚å°±ç›£è½ä¸€æ¬¡ `useEffect`ï¼Œå‰‡å¯ä»¥å°‡è®Šå‹•çš„è®Šæ•¸ä½œç‚ºåƒæ•¸å¡«å…¥ï¼š

```js
useEffect(() => {
  console.log(3);
}, [state]);
```

æœ€å¾Œï¼Œå¦‚æžœå¸Œæœ›èƒ½æ‹¿åˆ° state æ”¹è®Šå‰çš„å€¼ï¼Œå¯ä»¥é€éŽå›žå‚³çš„æ–¹å¼ï¼š

```js
useEffect(() => {
  return () => {
    console.log(`Old valueï¼š${state}`);
  };
}, [state]);
```
