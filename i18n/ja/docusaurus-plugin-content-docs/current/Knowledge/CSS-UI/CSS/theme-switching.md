---
id: theme-switching
title: '[Medium] ğŸ¨ ãƒãƒ«ãƒãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆå®Ÿè£…'
slug: /theme-switching
tags: [CSS, Quiz, Medium, RWD]
---

## ğŸ“‹ é¢æ¥ã‚·ãƒŠãƒªã‚ªå•é¡Œ

**Q: ãƒšãƒ¼ã‚¸ã«2ç¨®é¡ã®ç•°ãªã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆä¾‹ï¼šãƒ©ã‚¤ãƒˆ/ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒï¼‰ã‚’å®Ÿè£…ã™ã‚‹å ´åˆã€CSS ã‚’ã©ã®ã‚ˆã†ã«è¨­è¨ˆã—ã¾ã™ã‹ï¼Ÿ**

ã“ã‚Œã¯ CSS ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆã¨å®Ÿå‹™çµŒé¨“ã‚’å•ã†å•é¡Œã§ã€ä»¥ä¸‹ã‚’å«ã¿ã¾ã™ï¼š

1. CSS ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ
2. ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆæˆ¦ç•¥
3. ãƒ¢ãƒ€ãƒ³ãƒ„ãƒ¼ãƒ«ã®æ´»ç”¨ï¼ˆTailwind CSSã€CSS Variablesï¼‰
4. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã®è€ƒæ…®

---

## ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ä¸€è¦§

| ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³              | é©ç”¨ã‚·ãƒ¼ãƒ³                 | ãƒ¡ãƒªãƒƒãƒˆ                     | ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ           | æ¨å¥¨åº¦         |
| --------------------------- | -------------------------- | ---------------------------- | -------------------- | -------------- |
| **CSS Variables**           | ãƒ¢ãƒ€ãƒ³ãƒ–ãƒ©ã‚¦ã‚¶ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ | å‹•çš„åˆ‡æ›¿ã€é«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹   | IE éå¯¾å¿œ            | 5/5 å¼·ãæ¨å¥¨   |
| **Quasar + Pinia + SCSS**   | Vue 3 + Quasar ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ| å®Œå…¨ãªã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã€çŠ¶æ…‹ç®¡ç† | Quasar Framework å¿…é ˆ| 5/5 å¼·ãæ¨å¥¨   |
| **Tailwind CSS**            | é«˜é€Ÿé–‹ç™ºã€ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ  | é–‹ç™ºãŒé€Ÿã„ã€ä¸€è²«æ€§ãŒé«˜ã„     | å­¦ç¿’ã‚³ã‚¹ãƒˆã€HTML å†—é•·| 5/5 å¼·ãæ¨å¥¨   |
| **CSS Class åˆ‡æ›¿**          | ãƒ¬ã‚¬ã‚·ãƒ¼ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œãŒå¿…è¦ | äº’æ›æ€§ãŒè‰¯ã„                 | CSS ã‚µã‚¤ã‚ºãŒå¤§ãã„   | 4/5 æ¨å¥¨       |
| **CSS Modules**             | React/Vue ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå‹ | ã‚¹ã‚³ãƒ¼ãƒ—åˆ†é›¢                 | ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ãŒå¿…è¦   | 4/5 æ¨å¥¨       |
| **Styled Components**       | React ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ         | CSS-in-JSã€å‹•çš„ã‚¹ã‚¿ã‚¤ãƒ«      | ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ | 4/5 æ¨å¥¨   |
| **SASS/LESS å¤‰æ•°**          | ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«ãƒ†ãƒ¼ãƒæ±ºå®š   | æ©Ÿèƒ½ãŒè±Šå¯Œ                   | å‹•çš„åˆ‡æ›¿ãŒã§ããªã„   | 3/5 æ¤œè¨ã®ä½™åœ° |
| **ç‹¬ç«‹ CSS ãƒ•ã‚¡ã‚¤ãƒ«**       | ãƒ†ãƒ¼ãƒã®å·®ç•°ãŒå¤§ãã„       | æ˜ç¢ºãªåˆ†é›¢                   | èª­ã¿è¾¼ã¿ã‚³ã‚¹ãƒˆã€é‡è¤‡ã‚³ãƒ¼ãƒ‰ | 2/5 éæ¨å¥¨ |

---

## ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ 1ï¼šCSS Variables

### ã‚³ã‚¢ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

CSS ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼ˆCSS Custom Propertiesï¼‰ã‚’ä½¿ç”¨ã—ã€ãƒ«ãƒ¼ãƒˆè¦ç´ ã® class ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ã§å¤‰æ•°å€¤ã‚’å¤‰æ›´ã—ã¾ã™ã€‚

### å®Ÿè£…æ–¹æ³•

#### 1. ãƒ†ãƒ¼ãƒå¤‰æ•°ã®å®šç¾©

```css
/* styles/themes.css */

/* ãƒ©ã‚¤ãƒˆãƒ†ãƒ¼ãƒï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ */
:root {
  --color-primary: #3b82f6;
  --color-secondary: #8b5cf6;
  --color-background: #ffffff;
  --color-text: #1f2937;
  --color-border: #e5e7eb;
  --color-card: #f9fafb;
  --shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒ */
[data-theme='dark'] {
  --color-primary: #60a5fa;
  --color-secondary: #a78bfa;
  --color-background: #1f2937;
  --color-text: #f9fafb;
  --color-border: #374151;
  --color-card: #111827;
  --shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

/* ç¬¬3ã®ãƒ†ãƒ¼ãƒãŒã‚ã‚‹å ´åˆï¼ˆä¾‹ï¼šç›®ã«å„ªã—ã„ãƒ¢ãƒ¼ãƒ‰ï¼‰ */
[data-theme='sepia'] {
  --color-primary: #92400e;
  --color-secondary: #78350f;
  --color-background: #fef3c7;
  --color-text: #451a03;
  --color-border: #fde68a;
  --color-card: #fef9e7;
  --shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}
```

#### 2. å¤‰æ•°ã®ä½¿ç”¨

```css
/* components/Button.css */
.button {
  background-color: var(--color-primary);
  color: var(--color-text);
  border: 1px solid var(--color-border);
  box-shadow: var(--shadow);
  transition: all 0.3s ease;
}

.card {
  background-color: var(--color-card);
  color: var(--color-text);
  border: 1px solid var(--color-border);
}

body {
  background-color: var(--color-background);
  color: var(--color-text);
}
```

#### 3. JavaScript ã§ãƒ†ãƒ¼ãƒã‚’åˆ‡ã‚Šæ›¿ãˆ

```javascript
// utils/theme.js

// ç¾åœ¨ã®ãƒ†ãƒ¼ãƒã‚’å–å¾—
function getCurrentTheme() {
  return localStorage.getItem('theme') || 'light';
}

// ãƒ†ãƒ¼ãƒã‚’è¨­å®š
function setTheme(theme) {
  document.documentElement.setAttribute('data-theme', theme);
  localStorage.setItem('theme', theme);
}

// ãƒ†ãƒ¼ãƒã‚’åˆ‡ã‚Šæ›¿ãˆ
function toggleTheme() {
  const currentTheme = getCurrentTheme();
  const newTheme = currentTheme === 'light' ? 'dark' : 'light';
  setTheme(newTheme);
}

// åˆæœŸåŒ–ï¼ˆlocalStorage ã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¥½ã¿ã‚’èª­ã¿å–ã‚Šï¼‰
function initTheme() {
  const savedTheme = getCurrentTheme();
  setTheme(savedTheme);

  // ã‚·ã‚¹ãƒ†ãƒ ãƒ†ãƒ¼ãƒã®å¤‰æ›´ã‚’ç›£è¦–
  const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
  mediaQuery.addEventListener('change', (e) => {
    if (!localStorage.getItem('theme')) {
      // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¥½ã¿ã‚’è¨­å®šã—ã¦ã„ãªã„å ´åˆã€ã‚·ã‚¹ãƒ†ãƒ ã«è¿½å¾“
      setTheme(e.matches ? 'dark' : 'light');
    }
  });
}

// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«åˆæœŸåŒ–
initTheme();
```

#### 4. Vue 3 çµ±åˆä¾‹

```vue
<template>
  <div>
    <button @click="toggleTheme" class="theme-toggle">
      <span v-if="currentTheme === 'light'">ğŸŒ™ ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰</span>
      <span v-else>â˜€ï¸ ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰</span>
    </button>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue';

const currentTheme = ref('light');

function toggleTheme() {
  const newTheme = currentTheme.value === 'light' ? 'dark' : 'light';
  currentTheme.value = newTheme;
  document.documentElement.setAttribute('data-theme', newTheme);
  localStorage.setItem('theme', newTheme);
}

onMounted(() => {
  const savedTheme = localStorage.getItem('theme') || 'light';
  currentTheme.value = savedTheme;
  document.documentElement.setAttribute('data-theme', savedTheme);
});
</script>
```

### ãƒ¡ãƒªãƒƒãƒˆ

- âœ… **å‹•çš„åˆ‡æ›¿**ï¼šCSS ãƒ•ã‚¡ã‚¤ãƒ«ã®å†èª­ã¿è¾¼ã¿ãŒä¸è¦
- âœ… **é«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**ï¼šãƒ–ãƒ©ã‚¦ã‚¶ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚µãƒãƒ¼ãƒˆã€å¤‰æ•°å€¤ã®å¤‰æ›´ã®ã¿
- âœ… **ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãŒå®¹æ˜“**ï¼šãƒ†ãƒ¼ãƒã®ä¸€å…ƒç®¡ç†ã€å¤‰æ›´ãŒç°¡å˜
- âœ… **æ‹¡å¼µæ€§**ï¼šç¬¬3ã€ç¬¬4ã®ãƒ†ãƒ¼ãƒã‚’å®¹æ˜“ã«è¿½åŠ å¯èƒ½

### ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ

- âŒ **IE éå¯¾å¿œ**ï¼špolyfill ã¾ãŸã¯ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ–¹æ¡ˆãŒå¿…è¦
- âŒ **ãƒ—ãƒªãƒ—ãƒ­ã‚»ãƒƒã‚µã¨ã®çµ±åˆ**ï¼šSASS/LESS å¤‰æ•°ã¨ã®æ··ç”¨ã«æ³¨æ„ãŒå¿…è¦

---

## ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ 2ï¼šTailwind CSS

### ã‚³ã‚¢ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

Tailwind CSS ã® `dark:` ãƒãƒªã‚¢ãƒ³ãƒˆã¨ã‚«ã‚¹ã‚¿ãƒ ãƒ†ãƒ¼ãƒè¨­å®šã‚’ä½¿ç”¨ã—ã€class ã®åˆ‡ã‚Šæ›¿ãˆã§ãƒ†ãƒ¼ãƒã‚’å®Ÿç¾ã—ã¾ã™ã€‚

### å®Ÿè£…æ–¹æ³•

#### 1. Tailwind ã®è¨­å®š

```javascript
// tailwind.config.js
module.exports = {
  darkMode: 'class', // class æˆ¦ç•¥ã‚’ä½¿ç”¨ï¼ˆmedia query ã§ã¯ãªãï¼‰
  theme: {
    extend: {
      colors: {
        // ã‚«ã‚¹ã‚¿ãƒ ã‚«ãƒ©ãƒ¼ï¼ˆè¤‡æ•°ã®ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼ã‚»ãƒƒãƒˆã‚’å®šç¾©å¯èƒ½ï¼‰
        primary: {
          light: '#3b82f6',
          dark: '#60a5fa',
        },
        background: {
          light: '#ffffff',
          dark: '#1f2937',
        },
        text: {
          light: '#1f2937',
          dark: '#f9fafb',
        },
      },
    },
  },
  plugins: [],
};
```

#### 2. Tailwind ã®ãƒ†ãƒ¼ãƒã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨

```vue
<template>
  <!-- æ–¹æ³• 1ï¼šdark: ãƒãƒªã‚¢ãƒ³ãƒˆã‚’ä½¿ç”¨ -->
  <div class="bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100">
    <h1 class="text-blue-600 dark:text-blue-400">ã‚¿ã‚¤ãƒˆãƒ«</h1>

    <button
      class="bg-blue-500 hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700 text-white px-4 py-2 rounded"
    >
      ãƒœã‚¿ãƒ³
    </button>

    <div
      class="bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-md dark:shadow-lg"
    >
      <p class="text-gray-700 dark:text-gray-300">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ†ã‚­ã‚¹ãƒˆ</p>
    </div>
  </div>

  <!-- ãƒ†ãƒ¼ãƒåˆ‡æ›¿ãƒœã‚¿ãƒ³ -->
  <button @click="toggleTheme" class="fixed top-4 right-4">
    <svg v-if="isDark" class="w-6 h-6">
      <!-- å¤ªé™½ã‚¢ã‚¤ã‚³ãƒ³ -->
    </svg>
    <svg v-else class="w-6 h-6">
      <!-- æœˆã‚¢ã‚¤ã‚³ãƒ³ -->
    </svg>
  </button>
</template>

<script setup>
import { ref, onMounted } from 'vue';

const isDark = ref(false);

function toggleTheme() {
  isDark.value = !isDark.value;
  updateTheme();
}

function updateTheme() {
  if (isDark.value) {
    document.documentElement.classList.add('dark');
    localStorage.setItem('theme', 'dark');
  } else {
    document.documentElement.classList.remove('dark');
    localStorage.setItem('theme', 'light');
  }
}

onMounted(() => {
  // ä¿å­˜ã•ã‚ŒãŸãƒ†ãƒ¼ãƒã®å¥½ã¿ã‚’èª­ã¿å–ã‚Š
  const savedTheme = localStorage.getItem('theme');
  const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

  isDark.value = savedTheme === 'dark' || (!savedTheme && prefersDark);
  updateTheme();
});
</script>
```

#### 3. ä¸Šç´šç·¨ï¼šã‚«ã‚¹ã‚¿ãƒ ãƒãƒ«ãƒãƒ†ãƒ¼ãƒï¼ˆ2ç¨®é¡ä»¥ä¸Šï¼‰

```javascript
// tailwind.config.js
module.exports = {
  darkMode: 'class',
  theme: {
    extend: {
      colors: {
        theme: {
          bg: 'var(--theme-bg)',
          text: 'var(--theme-text)',
          primary: 'var(--theme-primary)',
        },
      },
    },
  },
};
```

```css
/* styles/themes.css */
:root {
  --theme-bg: #ffffff;
  --theme-text: #000000;
  --theme-primary: #3b82f6;
}

[data-theme='dark'] {
  --theme-bg: #1f2937;
  --theme-text: #f9fafb;
  --theme-primary: #60a5fa;
}

[data-theme='sepia'] {
  --theme-bg: #fef3c7;
  --theme-text: #451a03;
  --theme-primary: #92400e;
}
```

```vue
<template>
  <!-- ã‚«ã‚¹ã‚¿ãƒ ãƒ†ãƒ¼ãƒå¤‰æ•°ã‚’ä½¿ç”¨ -->
  <div class="bg-theme-bg text-theme-text">
    <button class="bg-theme-primary">ãƒœã‚¿ãƒ³</button>
  </div>

  <!-- ãƒ†ãƒ¼ãƒã‚»ãƒ¬ã‚¯ã‚¿ -->
  <select @change="setTheme($event.target.value)">
    <option value="light">ãƒ©ã‚¤ãƒˆ</option>
    <option value="dark">ãƒ€ãƒ¼ã‚¯</option>
    <option value="sepia">ç›®ã«å„ªã—ã„</option>
  </select>
</template>

<script setup>
function setTheme(theme) {
  document.documentElement.setAttribute('data-theme', theme);
  localStorage.setItem('theme', theme);
}
</script>
```

### Tailwind ã®åˆ©ç‚¹

- âœ… **é«˜é€Ÿé–‹ç™º**ï¼šutility-first ã§ CSS ã‚’æ›¸ãå¿…è¦ãªã—
- âœ… **ä¸€è²«æ€§**ï¼šãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ å†…è”µã€ã‚¹ã‚¿ã‚¤ãƒ«ã®çµ±ä¸€æ€§ã‚’ç¶­æŒ
- âœ… **tree-shaking**ï¼šæœªä½¿ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’è‡ªå‹•çš„ã«å‰Šé™¤
- âœ… **RWD ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼**ï¼š`sm:`, `md:`, `lg:` ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒãƒªã‚¢ãƒ³ãƒˆ
- âœ… **ãƒ†ãƒ¼ãƒãƒãƒªã‚¢ãƒ³ãƒˆ**ï¼š`dark:`, `hover:`, `focus:` ãªã©è±Šå¯Œãªãƒãƒªã‚¢ãƒ³ãƒˆ

### ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ

- âŒ **HTML ãŒå†—é•·**ï¼šclass ãŒå¤šãã€å¯èª­æ€§ã«å½±éŸ¿ã™ã‚‹å¯èƒ½æ€§
- âŒ **å­¦ç¿’ã‚³ã‚¹ãƒˆ**ï¼šutility class ã®å‘½åã«æ…£ã‚Œã‚‹å¿…è¦ãŒã‚ã‚‹
- âŒ **ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º**ï¼šæ·±ã„ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã«ã¯è¨­å®šã®ç†è§£ãŒå¿…è¦

---

## ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ 3ï¼šQuasar + Pinia + SCSSï¼ˆæœ€è¿‘ã®çµŒé¨“ï¼‰

> ğŸ’¼ **å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçµŒé¨“**ï¼šã“ã‚Œã¯å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ç”¨ã—ãŸã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã€Quasar Frameworkã€Pinia çŠ¶æ…‹ç®¡ç†ã€SCSS å¤‰æ•°ã‚·ã‚¹ãƒ†ãƒ ã‚’çµ±åˆã—ã¦ã„ã¾ã™ã€‚

### ã‚³ã‚¢ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

å¤šå±¤ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆã‚’æ¡ç”¨ï¼š

1. **Quasar Dark Mode API** - ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ¬ãƒ™ãƒ«ã®ãƒ†ãƒ¼ãƒã‚µãƒãƒ¼ãƒˆ
2. **Pinia Store** - ãƒ†ãƒ¼ãƒçŠ¶æ…‹ã®ä¸€å…ƒç®¡ç†
3. **SessionStorage** - ãƒ¦ãƒ¼ã‚¶ãƒ¼å¥½ã¿ã®æ°¸ç¶šåŒ–
4. **SCSS Variables + Mixin** - ãƒ†ãƒ¼ãƒå¤‰æ•°ã¨ã‚¹ã‚¿ã‚¤ãƒ«ç®¡ç†

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ•ãƒ­ãƒ¼

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåˆ‡æ›¿ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
    â†“
Quasar $q.dark.toggle()
    â†“
Pinia Store ã®çŠ¶æ…‹æ›´æ–°
    â†“
SessionStorage ã«åŒæœŸ
    â†“
Body class ã®åˆ‡æ›¿ (.body--light / .body--dark)
    â†“
CSS å¤‰æ•°ã®æ›´æ–°
    â†“
UI ã®è‡ªå‹•æ›´æ–°
```

### å®Ÿè£…æ–¹æ³•

#### 1. Pinia Storeï¼ˆçŠ¶æ…‹ç®¡ç†ï¼‰

```typescript
// src/stores/darkModeStore.ts
import { defineStore } from 'pinia';
import { useSessionStorage } from '@vueuse/core';

export const useDarkModeStore = defineStore('darkMode', () => {
  // SessionStorage ã§çŠ¶æ…‹ã‚’æ°¸ç¶šåŒ–
  const isDarkMode = useSessionStorage<boolean>('isDarkMode', false);

  // Dark Mode çŠ¶æ…‹ã®æ›´æ–°
  const updateIsDarkMode = (status: boolean) => {
    isDarkMode.value = status;
  };

  return {
    isDarkMode,
    updateIsDarkMode,
  };
});
```

#### 2. Quasar è¨­å®š

```javascript
// quasar.config.js
module.exports = configure(function (/* ctx */) {
  return {
    framework: {
      config: {
        dark: 'true', // Dark Mode ã‚µãƒãƒ¼ãƒˆã‚’æœ‰åŠ¹åŒ–
      },
      plugins: ['Notify', 'Loading', 'Dialog'],
    },
  };
});
```

#### 3. SCSS ãƒ†ãƒ¼ãƒå¤‰æ•°ã‚·ã‚¹ãƒ†ãƒ 

```scss
// assets/css/_variable.scss

// Light ã¨ Dark 2ã¤ã®ãƒ†ãƒ¼ãƒã®å¤‰æ•°ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’å®šç¾©
$themes: (
  light: (
    --bg-main: #ffffff,
    --bg-side: #f0f1f4,
    --text-primary: #000000,
    --text-secondary: #666666,
    --primary-color: #2d7eff,
    --border-color: #e5ebf2,
  ),
  dark: (
    --bg-main: #081f2d,
    --bg-side: #0d2533,
    --text-primary: #ffffff,
    --text-secondary: #b0b0b0,
    --primary-color: #2d7eff,
    --border-color: #14384d,
  ),
);

// Mixin: ãƒ†ãƒ¼ãƒã«å¿œã˜ã¦å¯¾å¿œã™ã‚‹ CSS å¤‰æ•°ã‚’é©ç”¨
@mixin theme-vars($theme) {
  @each $key, $value in map-get($themes, $theme) {
    #{$key}: #{$value};
  }
}

// Mixin: Light Mode å°‚ç”¨ã‚¹ã‚¿ã‚¤ãƒ«
@mixin light {
  .body--light & {
    @content;
  }
}

// Mixin: Dark Mode å°‚ç”¨ã‚¹ã‚¿ã‚¤ãƒ«
@mixin dark {
  .body--dark & {
    @content;
  }
}
```

#### 4. ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ†ãƒ¼ãƒã®é©ç”¨

```scss
// src/css/app.scss
@import 'assets/css/_variable.scss';

// ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ Light Theme ã‚’é©ç”¨
:root {
  @include theme-vars('light');
}

// Dark Mode ã§ Dark Theme ã‚’é©ç”¨
.body--dark {
  @include theme-vars('dark');
}
```

#### 5. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®ä½¿ç”¨

**æ–¹æ³• Aï¼šCSS å¤‰æ•°ã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰**

```vue
<template>
  <div class="my-card">
    <h2 class="title">ã‚¿ã‚¤ãƒˆãƒ«</h2>
    <p class="content">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ†ã‚­ã‚¹ãƒˆ</p>
  </div>
</template>

<style scoped lang="scss">
.my-card {
  background: var(--bg-main);
  color: var(--text-primary);
  border: 1px solid var(--border-color);
  padding: 1rem;
}

.title {
  color: var(--primary-color);
  font-size: 1.5rem;
}

.content {
  color: var(--text-secondary);
}
</style>
```

**æ–¹æ³• Bï¼šSCSS Mixin ã‚’ä½¿ç”¨ï¼ˆä¸Šç´šï¼‰**

```vue
<template>
  <button class="custom-btn">ãƒœã‚¿ãƒ³</button>
</template>

<style scoped lang="scss">
@import 'assets/css/_variable.scss';

.custom-btn {
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  transition: all 0.3s ease;

  @include light {
    background: #2d7eff;
    color: #ffffff;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);

    &:hover {
      background: #1a5fd9;
    }
  }

  @include dark {
    background: #1677ff;
    color: #ffffff;
    box-shadow: 0 2px 4px rgba(255, 255, 255, 0.1);

    &:hover {
      background: #0d5acc;
    }
  }
}
</style>
```

#### 6. åˆ‡æ›¿æ©Ÿèƒ½

```vue
<template>
  <button @click="toggleDarkMode" class="theme-toggle">
    <q-icon :name="isDarkMode ? 'light_mode' : 'dark_mode'" />
    {{ isDarkMode ? 'ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ã«åˆ‡æ›¿' : 'ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡æ›¿' }}
  </button>
</template>

<script setup lang="ts">
import { useQuasar } from 'quasar';
import { onMounted } from 'vue';
import { useDarkModeStore } from 'stores/darkModeStore';

const $q = useQuasar();
const { isDarkMode, updateIsDarkMode } = useDarkModeStore();

// ãƒ†ãƒ¼ãƒã®åˆ‡æ›¿
const toggleDarkMode = () => {
  $q.dark.toggle(); // Quasar åˆ‡æ›¿
  updateIsDarkMode($q.dark.isActive); // Store ã«åŒæœŸ
};

// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¥½ã¿ã‚’å¾©å…ƒ
onMounted(() => {
  if (isDarkMode.value) {
    $q.dark.set(true);
  }
});
</script>

<style scoped lang="scss">
.theme-toggle {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  background: var(--primary-color);
  color: var(--text-primary);
  border: none;
  border-radius: 0.5rem;
  cursor: pointer;
  transition: opacity 0.3s ease;

  &:hover {
    opacity: 0.8;
  }
}
</style>
```

### ãƒ¡ãƒªãƒƒãƒˆ

- âœ… **å®Œå…¨ãªã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ **ï¼šQuasar + Pinia + VueUse ãƒ¯ãƒ³ã‚¹ãƒˆãƒƒãƒ—ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³
- âœ… **çŠ¶æ…‹ç®¡ç†**ï¼šPinia ã§ä¸€å…ƒç®¡ç†ã€ãƒ†ã‚¹ãƒˆã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãŒå®¹æ˜“
- âœ… **æ°¸ç¶šåŒ–**ï¼šSessionStorage ã§è‡ªå‹•ä¿å­˜ã€ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã—ã¦ã‚‚å¤±ã‚ã‚Œãªã„
- âœ… **å‹å®‰å…¨**ï¼šTypeScript ã‚µãƒãƒ¼ãƒˆã€ã‚¨ãƒ©ãƒ¼ã®å‰Šæ¸›
- âœ… **é–‹ç™ºä½“é¨“**ï¼šSCSS Mixin ã§ã‚¹ã‚¿ã‚¤ãƒ«é–‹ç™ºã‚’ç°¡ç´ åŒ–
- âœ… **é«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**ï¼šCSS Variables ã®å‹•çš„æ›´æ–°ã€å†èª­ã¿è¾¼ã¿ä¸è¦

### ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ

- âŒ **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ä¾å­˜**ï¼šQuasar Framework ãŒå¿…è¦
- âŒ **å­¦ç¿’ã‚³ã‚¹ãƒˆ**ï¼šQuasarã€Piniaã€SCSS ã®ç¿’å¾—ãŒå¿…è¦
- âŒ **ã‚µã‚¤ã‚ºãŒå¤§ãã„**ï¼šãƒ•ãƒ«æ©Ÿèƒ½ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯ç´”ç²‹ãª CSS ã‚ˆã‚Šé‡ã„

### ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

```typescript
// composables/useTheme.ts
import { computed } from 'vue';
import { useQuasar } from 'quasar';
import { useDarkModeStore } from 'stores/darkModeStore';

export function useTheme() {
  const $q = useQuasar();
  const store = useDarkModeStore();

  const isDark = computed(() => store.isDarkMode);

  const toggleTheme = () => {
    $q.dark.toggle();
    store.updateIsDarkMode($q.dark.isActive);
  };

  const setTheme = (dark: boolean) => {
    $q.dark.set(dark);
    store.updateIsDarkMode(dark);
  };

  return {
    isDark,
    toggleTheme,
    setTheme,
  };
}
```

### é¢æ¥ã§ã®ä¼ãˆæ–¹

> "å‰ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€**Quasar + Pinia + SCSS** ã§å®Œå…¨ãª Dark Mode ã‚·ã‚¹ãƒ†ãƒ ã‚’å®Ÿè£…ã—ã¾ã—ãŸï¼š
>
> 1. **çŠ¶æ…‹ç®¡ç†**ï¼šPinia Store ã§ãƒ†ãƒ¼ãƒçŠ¶æ…‹ã‚’ä¸€å…ƒç®¡ç†ã—ã€VueUse ã® `useSessionStorage` ã§æ°¸ç¶šåŒ–ã‚’å®Ÿç¾
> 2. **ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ **ï¼šSCSS ã® Map + Mixin ã§ãƒ†ãƒ¼ãƒå¤‰æ•°ã‚’å®šç¾©ã—ã€`:root` ã¨ `.body--dark` ã§é©ç”¨
> 3. **åˆ‡æ›¿ãƒ¡ã‚«ãƒ‹ã‚ºãƒ **ï¼šQuasar ã® `$q.dark` API ã§åˆ¶å¾¡ã€è‡ªå‹•çš„ã« `<body>` ã«å¯¾å¿œã™ã‚‹ class ã‚’è¿½åŠ 
> 4. **é–‹ç™ºä½“é¨“**ï¼š`@include light` ã¨ `@include dark` mixin ã‚’æä¾›ã—ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¹ã‚¿ã‚¤ãƒ«é–‹ç™ºã‚’ã‚ˆã‚Šç›´æ„Ÿçš„ã«
>
> ã“ã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§è‰¯å¥½ã«å‹•ä½œã—ã€ã‚¹ãƒ ãƒ¼ã‚ºãªåˆ‡æ›¿ã€å®‰å®šã—ãŸçŠ¶æ…‹ã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã®å®¹æ˜“ã•ã‚’å®Ÿç¾ã—ã¾ã—ãŸã€‚"

---

## ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ 4ï¼šCSS Class åˆ‡æ›¿

### å®Ÿè£…æ–¹æ³•

```css
/* styles/themes.css */

/* ãƒ©ã‚¤ãƒˆãƒ†ãƒ¼ãƒ */
body.theme-light {
  background-color: #ffffff;
  color: #000000;
}

body.theme-light .button {
  background-color: #3b82f6;
  color: #ffffff;
}

body.theme-light .card {
  background-color: #f9fafb;
  border: 1px solid #e5e7eb;
}

/* ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒ */
body.theme-dark {
  background-color: #1f2937;
  color: #f9fafb;
}

body.theme-dark .button {
  background-color: #60a5fa;
  color: #000000;
}

body.theme-dark .card {
  background-color: #111827;
  border: 1px solid #374151;
}
```

```javascript
// ãƒ†ãƒ¼ãƒã®åˆ‡æ›¿
function setTheme(theme) {
  document.body.className = `theme-${theme}`;
  localStorage.setItem('theme', theme);
}
```

### é©ç”¨ã‚·ãƒ¼ãƒ³

- IE ãªã©ã®ãƒ¬ã‚¬ã‚·ãƒ¼ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚µãƒãƒ¼ãƒˆãŒå¿…è¦ãªå ´åˆ
- ãƒ†ãƒ¼ãƒã®å·®ç•°ãŒå¤§ããã€å¤‰æ•°ã§ã®å¯¾å¿œãŒä¸é©åˆ‡ãªå ´åˆ
- è¿½åŠ ã®ä¾å­˜é–¢ä¿‚ã‚’å°å…¥ã—ãŸããªã„å ´åˆ

---

## ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ 5ï¼šç‹¬ç«‹ CSS ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆéæ¨å¥¨ï¼‰

### å®Ÿè£…æ–¹æ³•

```html
<!-- å‹•çš„ã« CSS ã‚’èª­ã¿è¾¼ã¿ -->
<link id="theme-stylesheet" rel="stylesheet" href="/styles/theme-light.css" />
```

```javascript
function setTheme(theme) {
  const link = document.getElementById('theme-stylesheet');
  link.href = `/styles/theme-${theme}.css`;
}
```

### ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ

- âŒ **èª­ã¿è¾¼ã¿ã‚³ã‚¹ãƒˆ**ï¼šåˆ‡æ›¿æ™‚ã« CSS ã®å†ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒå¿…è¦
- âŒ **FOUC**ï¼šä¸€ç¬ã®ã‚¹ã‚¿ã‚¤ãƒ«æœªé©ç”¨ã®ã¡ã‚‰ã¤ããŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§
- âŒ **é‡è¤‡ã‚³ãƒ¼ãƒ‰**ï¼šå…±é€šã‚¹ã‚¿ã‚¤ãƒ«ã®é‡è¤‡å®šç¾©ãŒå¿…è¦

---

## RWD ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ã¨ã®çµ±åˆ

### Tailwind CSS + RWD + ãƒ†ãƒ¼ãƒåˆ‡æ›¿

```vue
<template>
  <div
    class="
      /* åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« */
      p-4 rounded-lg transition-colors

      /* ãƒ©ã‚¤ãƒˆãƒ†ãƒ¼ãƒ */
      bg-white text-gray-900

      /* ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒ */
      dark:bg-gray-800 dark:text-gray-100

      /* RWD: ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ */
      text-sm

      /* RWD: ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆä»¥ä¸Š */
      md:text-base md:p-6

      /* RWD: ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ä»¥ä¸Š */
      lg:text-lg lg:p-8

      /* ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³çŠ¶æ…‹ */
      hover:shadow-lg hover:scale-105
    "
  >
    <h2
      class="
        font-bold
        text-xl md:text-2xl lg:text-3xl
        text-blue-600 dark:text-blue-400
      "
    >
      ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ã‚¿ã‚¤ãƒˆãƒ«
    </h2>

    <p class="mt-2 text-gray-700 dark:text-gray-300">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ†ã‚­ã‚¹ãƒˆ</p>

    <!-- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ã‚°ãƒªãƒƒãƒ‰ -->
    <div
      class="
        grid
        grid-cols-1       /* ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³: 1åˆ— */
        sm:grid-cols-2    /* å°å‹ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ: 2åˆ— */
        md:grid-cols-3    /* ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ: 3åˆ— */
        lg:grid-cols-4    /* ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—: 4åˆ— */
        gap-4
      "
    >
      <div
        v-for="item in items"
        :key="item.id"
        class="
          p-4 rounded
          bg-gray-100 dark:bg-gray-700
          hover:bg-gray-200 dark:hover:bg-gray-600
        "
      >
        {{ item.name }}
      </div>
    </div>
  </div>
</template>
```

### CSS Variables + Media Queries

```css
/* åŸºæœ¬å¤‰æ•° */
:root {
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --font-size-base: 16px;
}

/* ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆä»¥ä¸Šã§é–“éš”ã‚’èª¿æ•´ */
@media (min-width: 768px) {
  :root {
    --spacing-sm: 0.75rem;
    --spacing-md: 1.5rem;
    --spacing-lg: 2rem;
  }
}

/* ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ä»¥ä¸Šã§ãƒ•ã‚©ãƒ³ãƒˆã‚’èª¿æ•´ */
@media (min-width: 1024px) {
  :root {
    --font-size-base: 18px;
  }
}

/* å¤‰æ•°ã‚’ä½¿ç”¨ */
.container {
  padding: var(--spacing-md);
  font-size: var(--font-size-base);
}

/* ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒ + RWD */
@media (min-width: 768px) {
  [data-theme='dark'] {
    --shadow: 0 4px 6px rgba(0, 0, 0, 0.5);
  }
}
```

---

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹

### 1. FOUCï¼ˆFlash of Unstyled Contentï¼‰ã®å›é¿

```html
<!-- <head> å†…ã§å³åº§ã«å®Ÿè¡Œã—ã€ã¡ã‚‰ã¤ãã‚’é˜²æ­¢ -->
<script>
  (function () {
    const theme = localStorage.getItem('theme') || 'light';
    document.documentElement.setAttribute('data-theme', theme);
    if (theme === 'dark') {
      document.documentElement.classList.add('dark');
    }
  })();
</script>
```

### 2. prefers-color-scheme ã®ä½¿ç”¨

```css
/* ã‚·ã‚¹ãƒ†ãƒ ãƒ†ãƒ¼ãƒã‚’è‡ªå‹•æ¤œå‡º */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    /* ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¥½ã¿ã‚’è¨­å®šã—ã¦ã„ãªã„å ´åˆã€ã‚·ã‚¹ãƒ†ãƒ ã«è¿½å¾“ */
    --color-background: #1f2937;
    --color-text: #f9fafb;
  }
}
```

```javascript
// JavaScript ã§ã®æ¤œå‡º
const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
if (!localStorage.getItem('theme')) {
  setTheme(prefersDark ? 'dark' : 'light');
}
```

### 3. CSS ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³

```css
/* ã‚¹ãƒ ãƒ¼ã‚ºãªãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ */
* {
  transition: background-color 0.3s ease, color 0.3s ease,
    border-color 0.3s ease;
}

/* ã¾ãŸã¯ç‰¹å®šã®è¦ç´ ã«å¯¾ã—ã¦ */
body,
.card,
.button {
  transition: all 0.3s ease;
}
```

### 4. ãƒªãƒ•ãƒ­ãƒ¼ï¼ˆReflowï¼‰ã®å‰Šæ¸›

```css
/* å¹…ã‚„é«˜ã•ã‚’ç›´æ¥å¤‰æ›´ã™ã‚‹ä»£ã‚ã‚Šã« transform ã‚’ä½¿ç”¨ */
.theme-switching {
  transform: scale(1);
  transition: transform 0.3s ease;
}

.theme-switching:hover {
  transform: scale(1.05); /* GPU ã‚¢ã‚¯ã‚»ãƒ©ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ */
}
```

---

## å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

```
src/
â”œâ”€â”€ styles/
â”‚   â”œâ”€â”€ themes/
â”‚   â”‚   â”œâ”€â”€ variables.css       # CSS Variables å®šç¾©
â”‚   â”‚   â”œâ”€â”€ light.css          # ãƒ©ã‚¤ãƒˆãƒ†ãƒ¼ãƒ
â”‚   â”‚   â”œâ”€â”€ dark.css           # ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒ
â”‚   â”‚   â””â”€â”€ sepia.css          # ç›®ã«å„ªã—ã„ãƒ†ãƒ¼ãƒ
â”‚   â”œâ”€â”€ base.css               # åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â””â”€â”€ components/            # ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¹ã‚¿ã‚¤ãƒ«
â”‚       â”œâ”€â”€ button.css
â”‚       â””â”€â”€ card.css
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ theme.js               # ãƒ†ãƒ¼ãƒåˆ‡æ›¿ãƒ­ã‚¸ãƒƒã‚¯
â””â”€â”€ components/
    â””â”€â”€ ThemeToggle.vue        # ãƒ†ãƒ¼ãƒåˆ‡æ›¿ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
```

### ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

```javascript
// composables/useTheme.js (Vue 3 Composition API)
import { ref, onMounted, watch } from 'vue';

export function useTheme() {
  const theme = ref('light');
  const themes = ['light', 'dark', 'sepia'];

  function setTheme(newTheme) {
    if (!themes.includes(newTheme)) return;

    theme.value = newTheme;
    document.documentElement.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);

    // Tailwind dark mode
    if (newTheme === 'dark') {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
  }

  function toggleTheme() {
    const currentIndex = themes.indexOf(theme.value);
    const nextIndex = (currentIndex + 1) % themes.length;
    setTheme(themes[nextIndex]);
  }

  function initTheme() {
    const savedTheme = localStorage.getItem('theme');
    const prefersDark = window.matchMedia(
      '(prefers-color-scheme: dark)'
    ).matches;

    if (savedTheme) {
      setTheme(savedTheme);
    } else if (prefersDark) {
      setTheme('dark');
    }
  }

  onMounted(() => {
    initTheme();

    // ã‚·ã‚¹ãƒ†ãƒ ãƒ†ãƒ¼ãƒã®å¤‰æ›´ã‚’ç›£è¦–
    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
    mediaQuery.addEventListener('change', (e) => {
      if (!localStorage.getItem('theme')) {
        setTheme(e.matches ? 'dark' : 'light');
      }
    });
  });

  return {
    theme,
    themes,
    setTheme,
    toggleTheme,
  };
}
```

---

## é¢æ¥å›ç­”ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

**é¢æ¥å®˜ï¼šãƒšãƒ¼ã‚¸ã«2ç¨®é¡ã®ç•°ãªã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å®Ÿè£…ã™ã‚‹å ´åˆã€CSS ã‚’ã©ã®ã‚ˆã†ã«è¨­è¨ˆã—ã¾ã™ã‹ï¼Ÿ**

**å›ç­”æ–¹æ³• Aï¼šå®Ÿéš›ã®çµŒé¨“ã‚’ç¤ºã™ï¼ˆæ¨å¥¨ï¼‰**

> "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã«å¿œã˜ã¦æœ€é©ãªã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é¸æŠã—ã¾ã™ã€‚**å‰ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯**ã€**Quasar + Pinia + SCSS** ã§å®Ÿè£…ã—ã¾ã—ãŸï¼š
>
> **1. çŠ¶æ…‹ç®¡ç†ï¼ˆ30 ç§’ï¼‰**
>
> - Pinia Store ã§ãƒ†ãƒ¼ãƒçŠ¶æ…‹ã‚’çµ±ä¸€ç®¡ç†
> - VueUse ã® `useSessionStorage` ã§æ°¸ç¶šåŒ–
> - Quasar ã® `$q.dark` API ã§ãƒ†ãƒ¼ãƒã‚’åˆ¶å¾¡
>
> **2. ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ1 åˆ†ï¼‰**
>
> ```scss
> // SCSS Map ã§ãƒ†ãƒ¼ãƒå¤‰æ•°ã‚’å®šç¾©
> $themes: (
>   light: (
>     --bg-main: #fff,
>     --text: #000,
>   ),
>   dark: (
>     --bg-main: #081f2d,
>     --text: #fff,
>   ),
> );
>
> // :root ã¨ .body--dark ã«é©ç”¨
> :root {
>   @include theme-vars('light');
> }
> .body--dark {
>   @include theme-vars('dark');
> }
> ```
>
> - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ `var(--bg-main)` ã§è‡ªå‹•åˆ‡æ›¿
> - `@include light` / `@include dark` mixin ã§è¤‡é›‘ãªã‚¹ã‚¿ã‚¤ãƒ«ã‚’å‡¦ç†
>
> **3. åˆ‡æ›¿ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ï¼ˆ30 ç§’ï¼‰**
>
> ```typescript
> const toggleTheme = () => {
>   $q.dark.toggle(); // Quasar åˆ‡æ›¿
>   store.updateIsDarkMode($q.dark.isActive); // Store ã«åŒæœŸ
> };
> ```
>
> **4. å®Ÿéš›ã®æˆæœï¼ˆ30 ç§’ï¼‰**
>
> - ã¡ã‚‰ã¤ãã®ãªã„ã‚¹ãƒ ãƒ¼ã‚ºãªåˆ‡æ›¿ï¼ˆCSS Variables ã®å‹•çš„æ›´æ–°ï¼‰
> - çŠ¶æ…‹ã®æ°¸ç¶šåŒ–ï¼ˆãƒšãƒ¼ã‚¸ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã—ã¦ã‚‚ãƒ†ãƒ¼ãƒãŒå¤±ã‚ã‚Œãªã„ï¼‰
> - ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãŒå®¹æ˜“ï¼ˆãƒ†ãƒ¼ãƒå¤‰æ•°ã®ä¸€å…ƒç®¡ç†ï¼‰
> - é«˜ã„é–‹ç™ºåŠ¹ç‡ï¼ˆMixin ã§ã‚¹ã‚¿ã‚¤ãƒ«é–‹ç™ºã‚’ç°¡ç´ åŒ–ï¼‰"

**å›ç­”æ–¹æ³• Bï¼šæ±ç”¨ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆä»£æ›¿ï¼‰**

> "ãƒ¢ãƒ€ãƒ³ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ **CSS Variables + Tailwind CSS** ã‚’æ¨å¥¨ã—ã¾ã™ï¼š
>
> **1. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆï¼ˆ30 ç§’ï¼‰**
>
> - CSS Variables ã§ãƒ†ãƒ¼ãƒå¤‰æ•°ã‚’å®šç¾©ï¼ˆè‰²ã€é–“éš”ã€ã‚·ãƒ£ãƒ‰ã‚¦ãªã©ï¼‰
> - `data-theme` å±æ€§ã§ãƒ«ãƒ¼ãƒˆè¦ç´ ã®ãƒ†ãƒ¼ãƒã‚’åˆ‡æ›¿
> - Tailwind ã® `dark:` ãƒãƒªã‚¢ãƒ³ãƒˆã§é«˜é€Ÿé–‹ç™º
>
> **2. å®Ÿè£…ãƒã‚¤ãƒ³ãƒˆï¼ˆ1 åˆ†ï¼‰**
>
> ```css
> :root {
>   --color-bg: #fff;
>   --color-text: #000;
> }
> [data-theme='dark'] {
>   --color-bg: #1f2937;
>   --color-text: #f9fafb;
> }
> ```
>
> JavaScript ã§åˆ‡æ›¿æ™‚ã¯ `data-theme` å±æ€§ã‚’å¤‰æ›´ã™ã‚‹ã ã‘ã§ã€ãƒ–ãƒ©ã‚¦ã‚¶ãŒè‡ªå‹•çš„ã«å¯¾å¿œã™ã‚‹å¤‰æ•°ã‚’é©ç”¨ã—ã¾ã™ã€‚
>
> **3. RWD çµ±åˆï¼ˆ30 ç§’ï¼‰**
>
> ```html
> <div class="text-sm md:text-base lg:text-lg dark:bg-gray-800"></div>
> ```
>
> RWD ã¨ãƒ†ãƒ¼ãƒåˆ‡æ›¿ã‚’åŒæ™‚ã«å‡¦ç†ã§ãã¾ã™ã€‚
>
> **4. ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ï¼ˆ30 ç§’ï¼‰**
>
> - `<head>` å†…ã§ãƒ†ãƒ¼ãƒã®åˆæœŸåŒ–ã‚’å³åº§ã«å®Ÿè¡Œã—ã€FOUC ã‚’å›é¿
> - `localStorage` ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¥½ã¿ã‚’ä¿å­˜
> - `prefers-color-scheme` ã§ã‚·ã‚¹ãƒ†ãƒ ãƒ†ãƒ¼ãƒã«è¿½å¾“"

---

## ç™ºå±•çš„ãªè³ªå•

**Q1: IE ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã¯ã©ã†ã—ã¾ã™ã‹ï¼Ÿ**

A: CSS Class åˆ‡æ›¿ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ã‹ã€[css-vars-ponyfill](https://github.com/jhildenbiddle/css-vars-ponyfill) polyfill ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

**Q2: ãƒ†ãƒ¼ãƒåˆ‡æ›¿æ™‚ã®ã¡ã‚‰ã¤ãã‚’ã©ã†é˜²ãã¾ã™ã‹ï¼Ÿ**

A: HTML ã® `<head>` å†…ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å³åº§ã«å®Ÿè¡Œã—ã€ãƒšãƒ¼ã‚¸ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å‰ã«ãƒ†ãƒ¼ãƒã‚’è¨­å®šã—ã¾ã™ã€‚

**Q3: è¤‡æ•°ã®ãƒ†ãƒ¼ãƒã‚’ã©ã†ç®¡ç†ã—ã¾ã™ã‹ï¼Ÿ**

A: Design Tokens ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ç”¨ã—ã¦ã€ã™ã¹ã¦ã®ãƒ†ãƒ¼ãƒå¤‰æ•°ã‚’çµ±ä¸€ç®¡ç†ã—ã€Figma Variables ã¨åŒæœŸã•ã›ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

**Q4: ç•°ãªã‚‹ãƒ†ãƒ¼ãƒã‚’ã©ã†ãƒ†ã‚¹ãƒˆã—ã¾ã™ã‹ï¼Ÿ**

A: Storybook ã« `storybook-addon-themes` ã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ç”¨ã—ã€ã™ã¹ã¦ã®ãƒ†ãƒ¼ãƒãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¦–è¦šçš„ã«ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚

---

## é–¢é€£ãƒˆãƒ”ãƒƒã‚¯

- [CSS Variables (Custom Properties)](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties)
- [Tailwind CSS Dark Mode](https://tailwindcss.com/docs/dark-mode)
- [prefers-color-scheme](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme)

## Reference

- [Tailwind CSS Documentation](https://tailwindcss.com/docs)
- [CSS Custom Properties Guide](https://css-tricks.com/a-complete-guide-to-custom-properties/)
- [Dark Mode in 5 Minutes](https://web.dev/prefers-color-scheme/)
